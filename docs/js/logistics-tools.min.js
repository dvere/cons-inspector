let scMain=()=>{let t={},e=$("#oldCtr").val().trim(),n=$("#newCtr").val().trim(),r=Number(e.replace(/\D/g,""));t.oldContainer=e,t.newContainer=n,t.consignments=[],$.getJSON("/trunkcontainers/"+r+"/events").done(t=>{let e=[];return $.each(t,(t,n)=>{let r=n.description.split(" ")[1];r.match(/^PCS[0-9]{9}$/)&&e.push(r)}),e}).then(r=>{0!==r.length?$.each(r,(e,r)=>{$.post("/trunkcontainers/"+n+"/scan/"+r).done(e=>{let n={barcode:r,status:e.status};t.consignments.push(n)})}):(t.error=1,t.errormessage="Could not get records for "+e),$("#switch-results").text(JSON.stringify(t,void 0,2))})},scPrepare=()=>{let t="(CSTC|OOC)[0-9]{8}",e=$("<div>",{id:"cForm"}).append($("<input>",{id:"oldCtr",required:"required",pattern:t})).append($("<input>",{id:"newCtr",required:"required",pattern:t})).append($("<button>",{text:"Move Records",onclick:scMain}));$("#ltInsert").empty().append(e).append($("<div>",{id:"switch-results"})),$("#oldCtr").focus()};function addPartsToDOM(){var t;$("<link>",{id:"lt-style",rel:"stylesheet",href:"https://dvere.github.io/logistics-tools/"+"css/logistics-tools.min.css?v="+$.now()}).appendTo($("head"));var e=$("<div>",{id:"ltContainer"}).append($("<button>",{class:"ltButton",text:"Consignments Inspector"})).append($("<button>",{class:"ltButton",text:"Auto Containers"})).append($("<button>",{class:"ltButton",onclick:scPrepare,text:"Swap Containers"})).append($("<div>",{id:"ltInsert"}));$("div.breadcrumbs").hide(),$("div.page-content > div > div").empty().append(e)}$.when($.ready).then((function(){addPartsToDOM()}));
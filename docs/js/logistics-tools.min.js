let scMain=(t,e)=>{let n={},s=Number(t.replace(/\D/g,""));n.oldContainer=t,n.newContainer=e,n.consignments=[],$.getJSON("/trunkcontainers/"+s+"/events").done(t=>{let e=[];return $.each(t,(t,n)=>{let s=n.description.split(" ")[1];s.match(/^PCS[0-9]{9}$/)&&e.push(s)}),e}).then(s=>{0!==s.length?$.each(s,(t,s)=>{$.post("/trunkcontainers/"+e+"/scan/"+s).done(t=>{let e={barcode:s,status:t.status};n.consignments.push(e)})}):(n.error=1,n.errormessage="Could not get records for "+t),$("#switch-results").text(JSON.stringify(n,void 0,2))})},scPrepare=()=>{};function addPartsToDOM(){var t;$("<link>",{id:"lt-style",rel:"stylesheet",href:"https://dvere.github.io/logistics-tools/"+"css/logistics-tools.min.css?v="+$.now()}).appendTo($("head"));var e=$("<div>",{id:"ltContainer"}).append($("<button>",{class:"ltButton",text:"Consignments Inspector"})).append($("<button>",{class:"ltButton",text:"Auto Containers"})).append($("<button>",{class:"ltButton",text:"Swap Containers"}).click((function(){$(".lt-tab").hide(),$("#scForm").show()}))).append($("<div>",{id:"ltInsert"}));$("div.breadcrumbs").hide(),$("div.page-content > div > div").empty().append(e);let n="(CSTC|OOC)[0-9]{8}";$("#ltInsert").append($("<div>",{id:"scForm",class:"lt-tab"})).append($("<div>",{id:"switch_results"})),$("#scForm").append($("<input>",{id:"old_ctr",required:"required",pattern:n})).append($("<input>",{id:"new_ctr",required:"required",pattern:n})).append($("<button>",{id:"sc_btn",text:"Move Records"})),$("#sc_button").click(()=>{let t=$("#old_ctr").val().trim(),e=$("#new_ctr").val().trim();scMain(t,e)})}$.when($.ready).then((function(){addPartsToDOM()}));
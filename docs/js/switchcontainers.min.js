var scResult={records:[]};const barcodeToID=e=>Number(e.replace(/\D/g,"")),getEvents=e=>$.getJSON("/trunkcontainers/"+e+"/events"),scanRecord=(e,t)=>$.post("/truncontainers/"+t+"/scan/"+e),getRecords=e=>{let t=barcodeToID(e);return getEvents(t).done(e=>{$.each(e,(e,t)=>{let s=t.description.split(" ")[1];s.match(/^PCS[0-9]{9}$/)&&cons.push(s)})}),cons};let swapContainers=()=>{getRecords(scResult.oldContainer).done(e=>{0!==e.length?$.each(e,(e,t)=>{scanRecord(t,scResult.newContainer).done(e=>{let s={barcode:t,status:e.status};scResult.records.push(s)})}):(scResult.error=1,scResult.errormessage="Could not get records for "+scResult.oldContainer),showResult()})},processRequest=()=>{scResult.oldContainer=$("#oldCtr").val().trim(),scResult.newContainer=$("#newCtr").val().trim(),swapContainers()},showResult=()=>{$("#switch-results").text(JSON.stringify(scResult,void 0,2))},switchContainers=()=>{let e="(CSTC|OOC)[0-9]{8}",t=$("<div>",{id:"cForm"}).append($("<input>",{id:"oldCtr",required:"required",pattern:e})).append($("<input>",{id:"newCtr",required:"required",pattern:e})).append($("<button>",{text:"Move Records",onclick:processRequest}));$("#ltInsert").empty().append(t).append($("<div>",{id:"switch-results"})),$("#oldContainer").focus()};
let result={records:[]};const barcodeToID=e=>Number(e.replace(/\D/g,"")),getEvents=e=>$.getJSON("/trunkcontainers/"+e+"/events"),scanRecord=(e,t)=>$.post("/truncontainers/"+t+"/scan/"+e),getRecords=e=>{let t=barcodeToID(e);return getEvents(t).done(e=>{$.each(e,(e,t)=>{let r=t.description.split(" ")[1];r.match(/^PCS[0-9]{9}$/)&&cons.push(r)})}),cons};let swapContainers=()=>{getRecords(result.oldContainer).done(e=>{0!==e.length?$.each(e,(e,t)=>{scanRecord(t,result.newContainer).done(e=>{let r={barcode:t,status:e.status};result.records.push(r)})}):(result.error=1,result.errormessage="Could not get records for "+result.oldContainer),showResult()})},processRequest=()=>{result.oldContainer=$("#oldCtr").val().trim(),result.newContainer=$("#newCtr").val().trim(),swapContainers()},showResult=()=>{$("#switch-results").text(JSON.stringify(result,void 0,2))};function addForm(){let e="(CSTC|OOC)[0-9]{8}";var t=$("<div>",{id:"cForm"}).append($("<input>",{id:"oldCtr",required:"required",pattern:e})).append($("<input>",{id:"newCtr",required:"required",pattern:e})).append($("<button>",{class:"lt-button",text:"Move Records"}).click((function(){processRequest()})));$("#ltInsert").empty().append(t).append($("<div>",{id:"switch-results"})),$("#oldContainer").focus()}$.when($.ready).then((function(){addForm()}));